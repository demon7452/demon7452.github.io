---
layout: post
title: RabbitMQ学习总结
category: 技术
tags: 
keywords: RabbitMQ
description: RabbitMQ学习总结
---
##RabbitMQ学习总结
###定义
RabbitMQ是一个消息代理。从本质上来说，它是从生产者（producer）接收信息，然后将信息分发给消费者（consumer）。你可以把它想像成一个邮局：你把信件放入邮箱，邮递员就会把信件投递到你的收件人处。在这个比喻中，RabbitMQ就扮演着邮箱、邮局以及邮递员的角色。
###名词解析
- 生产（Producing）的意思就是发送信息。一个发送信息的程序就是生产者。我们使用"P"来表示：![](http://www.rabbitmq.com/img/tutorials/producer.png)
- 队列(queue)就是邮箱的名称。消息通过你的应用程序和RabbitMQ进行传输，它们能够只存储在一个队列（queue）中。 队列（queue）没有任何限制，你要存储多少消息都可以——基本上是一个无限的缓冲池（buffer）。多个生产者（producers）能够把消息发送给同一个队列，同样，多个消费者（consumers）也能够从同一个队列（queue）中获取数据。队列可以绘制成这样（图上是队列的名称）：![](http://www.rabbitmq.com/img/tutorials/queue.png)
- 消费（Consuming）和获取消息是一样的意思。一个消费者（consumer）就是一个等待获取消息的程序。我们把它绘制为"C"：![](http://www.rabbitmq.com/img/tutorials/consumer.png)

```
Note:生产者、消费者、代理需不一定要放在同一台机器上；事实上大多数应用也确实不会将他们放在一台机器上。
```

###AMQP说明
####1、AMQP是什么
AMQP（高级消息队列协议）是一个网络协议。它用来支持 符合要求的客户端应用（application）与 消息中间件代理（messaging middleware broker） 进行通信。
####2、消息代理和他们所扮演的角色
消息代理（message brokers）从发布者（publishers）亦称生产者（producers）那儿接收消息，并根据既定的路由规则把接收到的消息发送给处理消息的消费者（consumers）。

由于AMQP是一个网络协议，所以这个过程中的发布者，消费者，消息代理 可以存在于不同的设备上。
####3、AMQP 0-9-1 模型简介
AMQP 0-9-1的工作过程如下图：消息（message）被发布者（publisher）发送给交换机（exchange，交换机常常被比喻成邮局或者邮箱）。然后交换机将收到的消息根据路由规则分发给绑定的队列（queue）。最后AMQP代理会将消息投递给订阅了此队列的消费者，或者消费者按照需求自行获取。
![](https://www.rabbitmq.com/img/tutorials/intro/hello-world-example-routing.png)

- 模型的一些说明
    - 发布者（publisher）发布消息时可以给消息指定各种消息属性（message meta-data）。有些属性有可能会被消息代理（brokers）使用；而其他的属性则是完全不透明的，它们只能被接收消息的应用所使用。
    - 从安全角度考虑，网络是不可靠的，接收消息的应用有可能在处理消息的时候失败。基于此原因，AMQP模块包含了一个消息确认（message acknowledgements）的概念：当一个消息从队列中投递给消费者后（consumer），消费者会通知一下消息代理（broker），这个通知可以是自动执行的也可以由处理消息的应用（consumer）的开发者执行。当“消息确认”功能被启用后，消息代理不会完全将消息从队列中删除，除非消息代理收到来自消费者的确认回执（acknowledgement）。
    - 在某些情况下，例如当一个消息无法被成功路由时，消息或许会被返回给发布者并被丢弃。或者，如果消息代理执行了延期操作，消息会被放入一个所谓的死信队列中。此时，消息发布者可以选择某些参数来处理这些特殊情况。
    - 队列（queue），交换机（exchange）和绑定统称为AMQP实体（AMQP entities）。

##参考文档
1.<a href="http://www.rabbitmq.com/getstarted.html" target="_blank">RabbitMQ官方教程</a><br> 
2.<a href="http://rabbitmq-into-chinese.readthedocs.org/zh_CN/latest/AMQP/AMQP_0-9-1_Model_Explained/" target="_blank">AMQP 0-9-1 简介</a><br>
